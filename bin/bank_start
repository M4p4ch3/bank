#!/usr/bin/env python

from curses import wrapper
import logging
import sys

from bank import Account
from bank.display import (DispCurses, AccountDispCurses)
from bank.utils import RetCode

def wrap(win):
    """
    Curses wrapper
    """

    # Init display
    disp = DispCurses(win)

    # Init account display
    account_disp = AccountDispCurses(account, disp)

    # Browse account
    account_disp.browse_container()

logger = logging.getLogger("bank_start")

# Init account
account = Account()

# Import account file
ret = account.import_file()
if ret != RetCode.OK:
    logger.error("Import account file FAILED")
    sys.exit(RetCode.ERROR)

# Curses wrapper
wrapper(wrap)
